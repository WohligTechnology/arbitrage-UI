<ion-view view-title="Transaction List">
  <ion-header-bar class="bar-positive">
    <div class="buttons">
      <button class="button icon-left ion-chevron-left button-clear" ui-sref="app.home">Home</button>
    </div>
    <h1 class="title">{{currencyShortName2}} Transaction</h1>
    <div class="buttons">
      <button class="button" ui-sref="app.marketstatus">Status</button>
    </div>
  </ion-header-bar>
  <ion-content>
    <ul class="list list-transactions">
      <ion-refresher on-refresh="doRefresh()">
      </ion-refresher>
      <li class="item" ng-repeat="process in processes">
        <div class="">
          <div class="row">
            <div class="col">
              <p class="date">{{process.createdAt|date:'EEE, d MMM, H:mm:ss'}}</p>
            </div>
            <div class="col">
              <p class="date">{{process.updatedAt|date:'EEE, d MMM, H:mm:ss'}}
                <span class="right">{{differenceTime(process)}}s</span>
              </p>
            </div>

          </div>
          <div class="row">
            <div class="col">
              <h2>
                <span class="small-title">Qty:</span> {{process.transaction1.amountBTC|number:currentScript.currency1Decimal}}</h2>
            </div>
            <div class="col">
              <h3>
                <span class="small-title">Rate:</span> {{(process.ratio-1)*100|number:2}}%</h3>
            </div>
            <div class="col">
              <h3>
                <span class="small-title">Profit:</span> {{currencyShortName2}} {{(process.ratio-1.002)*process.transaction1.amountBTC|number:currentScript.currency1Decimal}}</h3>
            </div>
          </div>
          <div class="row" ng-if="process.processType=='BuySell'">
            <div class="col">
              <a ng-click="checkTransaction1(process.transaction1)" ng-class="{
                            'ion-clock button-positive':process.transaction1.status=='Pending',
                          'ion-checkmark-circled button-balanced':process.transaction1.status=='Completed',
                          'ion-close-circled button-assertive':process.transaction1.status=='Cancelled'
                        }" class="button button-small button-block icon-right">Buy: Binance</a>
              <div class="show-other">
                <span class="show-rate">Rate: {{process.transaction1.rate|number:currentScript.rateDecimal}} </span>
                <span class="show-quantity">Qty: {{process.transaction1.response.executedQty|number:0}}</span>
              </div>

            </div>
            <div class="col">
              <a ng-click="checkTransaction2(process.transaction2)" ng-class="{
                        'ion-clock button-positive':process.transaction2.status=='Pending',
                      'ion-checkmark-circled button-balanced':process.transaction2.status=='Completed',
                      'ion-close-circled button-assertive':process.transaction2.status=='Cancelled'
                    }" class="button button-small button-block icon-right ">Sell: Hibtc</a>
              <div class="show-other">
                <span class="show-rate">Rate: {{process.transaction2.rate|number:currentScript.rateDecimal}} </span>
                <span class="show-quantity">Qty: {{process.transaction2.response.execQuantity*currentScript.minimumInHitbtcQuantity|number:0}}</span>
              </div>
            </div>


          </div>
          <div class="row" ng-if="process.processType=='SellBuy'">
            <div class="col">
              <a ng-click="checkTransaction2(process.transaction2)" ng-class="{
                    'ion-clock button-positive':process.transaction2.status=='Pending',
                  'ion-checkmark-circled button-balanced':process.transaction2.status=='Completed',
                  'ion-close-circled button-assertive':process.transaction2.status=='Cancelled'
                }" class="button button-small button-block icon-right ">Buy: Hibtc </a>

              <div class="show-other">
                <span class="show-rate">Rate: {{process.transaction2.rate|number:currentScript.rateDecimal}} </span>
                <span class="show-quantity">Qty: {{process.transaction2.response.execQuantity*currentScript.minimumInHitbtcQuantity}}</span>
              </div>
            </div>
            <div class="col">
              <a ng-click="checkTransaction1(process.transaction1)" ng-class=" { 'ion-clock button-positive':process.transaction1.status=='Pending'
                , 'ion-checkmark-circled button-balanced':process.transaction1.status=='Completed' ,
                'ion-close-circled button-assertive':process.transaction1.status=='Cancelled' } " class="button button-small button-block icon-right ">Sell: Binance </a>
              <div class="show-other">
                <span class="show-rate">Rate: {{process.transaction1.rate|number:currentScript.rateDecimal}} </span>
                <span class="show-quantity">Qty: {{process.transaction1.response.executedQty|number:0}}</span>
              </div>
            </div>

          </div>
        </div>
      </li>

      <ion-infinite-scroll ng-if="moreDataCanBeLoaded() " icon="ion-loading-c " on-infinite="loadMoreData() ">
      </ion-infinite-scroll>
    </ul>
  </ion-content>
</ion-view>
